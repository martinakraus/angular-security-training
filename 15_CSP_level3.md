# Content-Security-Policy Level3: Nonces 

- Checkout Branch `csp-nonces` (`git checkout csp-nonces`)
- We need a backend in order to implement Angular CSRF-protection: `cd src/server && npm i`
- To start the Server run `npm run start:server` from the root directory
- This time the `CSP` will be generated by the server, since we need a unique Nonce. 
- This CSP-Config can be fetched by our Backend: `http://localhost:3000/csp`
- Open `csp-config.service.ts` and implement the `load()`-Function:
- It should fetch the CSP-config:
```typescript
type NonceConfig = {
  value: string;
  nonce: string;
}
```
- Store the `value` and the `nonce` inside the private Properties of the Service and return the data-Observable.
- Inside the `AppComponent` we subscribe to this Observable and the HTML will be rendered
- If you want you can try again the XSS-Attack from `Task: 2_XSS`

### Hints

```javascript
// csp-config-service.ts
  return this.http.get<NonceConfig>('http://localhost:3000/csp').pipe(
    map(data => {
  this._config = data.value;
  this._nonce = data.nonce;
  return data;
}))

```

[Solution](https://github.com/martinakraus/angular-security/tree/csp-nonces-solution)
